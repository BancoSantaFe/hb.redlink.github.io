(window.agentWebpackJsonp=window.agentWebpackJsonp||[]).push([[9],{646:function(t,e,a){"use strict";var n=a(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(145),n=n(a(337)),a=a(704),a=(0,o.connect)(function(t){return t})((0,n.default)(a.Launcher,"Launcher"));e.default=a},704:function(t,e,a){"use strict";var n=a(5);Object.defineProperty(e,"__esModule",{value:!0}),e.Launcher=void 0;var s=n(a(100)),c=n(a(101)),i=n(a(73)),l=n(a(74)),r=n(a(338)),u=n(a(143)),o=n(a(144)),d=n(a(98)),g=n(a(27)),p=n(a(23)),f=a(50),m=a(16),h=a(75),v=a(22),_=a(28),w=a(146),y=a(340),E=n(a(99)),b=n(a(24)),C=a(82),A=a(705);function T(a){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=(0,d.default)(a);return e=n?(t=(0,d.default)(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),(0,o.default)(this,e)}}var W="".concat(m.MBV3KeV,"/cta_help.png"),S="".concat(m.MBV3KeV,"/cta_chat.png"),M="".concat(m.MBV3KeV,"/cta_icon.png"),I="".concat(m.MBV3KeV,"/cta_help_b.png"),N="".concat(m.MBV3KeV,"/cta_chat_b.png"),k="".concat(m.MBV3KeV,"/cta_icon_b.png"),B=null,m=function(t){(0,u.default)(o,t);var e,a,n=T(o);function o(t){return(0,i.default)(this,o),(t=n.call(this,t)).handleToggle=t.handleToggle.bind((0,r.default)(t)),t.handleTouchMove=t.handleTouchMove.bind((0,r.default)(t)),t.addAnimatedImageSupport=t.addAnimatedImageSupport.bind((0,r.default)(t)),t.getAnimatedImageClass=t.getAnimatedImageClass.bind((0,r.default)(t)),t.state={dimensions:{height:""}},t}return(0,l.default)(o,[{key:"isPNG",value:function(t){return"png"===(("string"==typeof t?t.split(".").pop():null)||t)}},{key:"hasAPNGSupport",value:function(){return!(h.DEVICE__EDGE||h.DEVICE__IE11||navigator.userAgent.match(/MSIE ([0-9]+)\./)&&10<=parseInt(RegExp.$1)||navigator.userAgent.match(/Chrome\/([0-9]+)\./)&&parseInt(RegExp.$1)<=58)}},{key:"addAnimatedImageSupport",value:function(){(0,b.default.searchInsideShadowRoot)(".aivochat-animated-image")[0].forEach(function(t){B.animateImage(t)})}},{key:"getAnimatedImageClass",value:function(t){var e=this.hasAPNGSupport()?"":"aivochat-animated-image";return e=this.isPNG(t||"")?e:""}},{key:"handleToggle",value:(a=(0,c.default)(s.default.mark(function t(e){var a,n,o,c,i;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),o=this.props,a=o.dispatch,n=o.agentConfig,c=n.chatWindow.launcher.position||"right_bottom",o="right"===c.split("_")[0]?"right":"left",n._windowOpened){t.next=17;break}return t.next=7,(0,y.importAgentAppChunk)();case 7:return i=t.sent,n.chatWindow.staticPosition||E.default.dragWindow(o),t.next=11,a((0,f.setAppConfig)({AgentApp:i}));case 11:(i=c=null,_.isSmallWindow)()&&null!==n.ctaMobile?(c=n.ctaMobile.ctaType,i=!!n.ctaMobile.complements):(0,_.isSmallWindow)()||null===n.ctaWeb||(c=n.ctaWeb.ctaType,i=!!n.ctaWeb.complements),i=[{action:"event_id",param:n.app.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:c},{action:"activated_button",param:i},{action:"event",param:"open_cta"}],(0,C.setEventAnalytics)(n.user.id,n.app.id,window.navigator.userAgent,i),a((0,f.openWindow)());case 17:case"end":return t.stop()}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"handleTouchMove",value:function(t){var e,a,n,o,c=b.default.searchInsideShadowRoot(".agent-launcher")[0],i=c.classList.value;(0,_.isSmallWindow)()&&-1!==(-1!==i.indexOf("aivochat-launcher")||-1!==i.indexOf("agent-launcher")||i.indexOf("custom-html-css"))&&(t.preventDefault(),n=window.scrollY||window.pageYOffset,o=window.scrollX||window.pageXOffset,e=c.offsetWidth||c.clientWidth,a=c.offsetHeight||c.clientHeight,i=t.changedTouches[0].pageX-e/2,t=t.changedTouches[0].pageY-a/2,n=window.outerHeight-t-a+n,o=i-o,c.style.top="auto",c.style.right="auto",(n=n>window.outerHeight-a?window.outerHeight-a:n)<0&&(n=0),(o=o>window.outerWidth-e?window.outerWidth-e:o)<0&&(o=0),c.style.bottom="".concat(n,"px"),c.style.left="".concat(o,"px"))}},{key:"importAPNG",value:(e=(0,c.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.importAPNGChunk)();case 2:B=t.sent,this.addAnimatedImageSupport();case 4:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"componentDidMount",value:function(){var e=this,a=b.default.searchInsideShadowRoot(".agent-launcher")[0],t=this.props,n=t.dispatch,o=t.agentConfig,c=o.chatWindow.launcher,i=c.type,t=c.mobile,c=b.default.searchInsideShadowRoot,s=null;(0,_.isSmallWindow)()&&null!==o.ctaMobile?s=o.ctaMobile.ctaType:(0,_.isSmallWindow)()||null===o.ctaWeb||(s=o.ctaWeb.ctaType),a&&(a.addEventListener?a.addEventListener("touchmove",this.handleTouchMove):a.attachEvent("touchmove",this.handleTouchMove),this.hasAPNGSupport()||this.importAPNG()),(4===i&&!(0,_.isSmallWindow)()||(0,_.isSmallWindow)()&&4===t.type)&&setTimeout(function(){var t=(0,_.getHeightParentOrChild)(a);e.setState({dimensions:{height:t+30}})},1e3),c(".agent-launcher").length&&c(".agent-launcher")[0].addEventListener("click",function(){var t=[{action:"event_id",param:o.app.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:s},{action:"event",param:"open_cta"}];(0,C.setEventAnalytics)(o.user.id,o.app.id,window.navigator.userAgent,t),n((0,f.openWindow)())});c=window.document.querySelector(".agent-launcher");c&&c.addEventListener("click",function(){var t=[{action:"event_id",param:o.app.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:s},{action:"event",param:"open_cta"}];(0,C.setEventAnalytics)(o.user.id,o.app.id,window.navigator.userAgent,t),n((0,f.openWindow)())})}},{key:"getLauncher",value:function(){var t=this.props.agentConfig.chatWindow.launcher,e=t;return(0,_.isSmallWindow)()&&t.mobile?e=t.mobile:!(0,_.isSmallWindow)()&&t.web&&(e=t.web),e.enabled=t.enabled,e}},{key:"render",value:function(){function s(t,e,a){var n=t.target.height+20;switch(a){case"right_bottom":case"center_bottom":case"left_bottom":case"right_top":case"center_top":case"left_top":3!==e&&4!==e&&(n+=40)}c.setState({dimensions:{height:n}})}function l(t){var e=r.getAnimatedImageClass(n.image),a=r.getLauncher();switch(t||a.type){case 2:case 3:return g.default.createElement("img",{crossOrigin:"anonymous",className:e,src:a.image});case 4:return i("#custom_launcher_styles"),a.css&&o()[0].appendChild(m("style",{id:"custom_launcher_styles",innerHTML:"".concat(a.css)})),g.default.createElement("div",{dangerouslySetInnerHTML:{__html:a.html.replace(/(\\")/gm,'"')}});default:return h(t||a.type)}}var c=this,r=this,u=this.props.agentConfig,t=u.chatWindow,n=t.launcher,d=t.staticPosition,p=t.colors,e=u._windowOpened,a=u.__launcherHidden,t=u.chatWindow.launcher.enabled,f=!e&&t&&!a,o=b.default.searchInsideShadowRoot,i=b.default.removeElement,m=b.default.createElement,h=function(t){var e="",a=(0,w.contrast)(p[0]),n=u.ctaWeb||null,o=u.ctaWeb?u.ctaMobile:null;switch(t){case 1:e=a?W:I;break;case 5:e=a?S:N;break;case 6:e=a?M:k}return n.showNotification&&!(0,_.isSmallWindow)()||o.showNotification&&(0,_.isSmallWindow)()?g.default.createElement("div",{className:"aivochat-launcher__notification"},g.default.createElement("div",{className:"aivochat-launcher__notification-icon"},g.default.createElement("p",null,"1")),g.default.createElement("img",{src:e,className:c.getAnimatedImageClass(e),crossOrigin:"anonymous"})):g.default.createElement("img",{src:e,className:c.getAnimatedImageClass(e),crossOrigin:"anonymous"})};return g.default.createElement("div",null,function(){var t,c=r.getLauncher(),e=u.chatWindow.launcher.position;(0,_.isSmallWindow)()&&u.ctaMobile?t=u.ctaMobile:!(0,_.isSmallWindow)()&&u.ctaWeb&&(t=u.ctaWeb);function a(t){var e=(0,_.getPositionClass)(c.position||"right_bottom"),a=d?v.KEY__STATIC_POSITION:"",n="".concat(f?v.KEY__ELEMENT_SHOW:v.KEY__ELEMENT_HIDE),o="".concat(v.KEY__LAUNCHER," ").concat(e," ").concat(a," ").concat(n);switch(t||c.type){case 1:case 5:case 6:return"".concat(o," custom-background");case 2:return"".concat(o," ").concat(v.KEY__LAUNCHER_TYPE_WITH_IMAGE," custom-background");case 3:return"".concat(o," ").concat(v.KEY__LAUNCHER_TYPE_ONLY_IMAGE);case 4:return"".concat(e," ").concat(n," ").concat(v.KEY__LAUNCHER_TYPE_CUSTOM)}}var n=e;if(!c.enabled)return null;(0,_.isSmallWindow)()&&(n=u.chatWindow.launcher.mobile.position);var o=r.state.dimensions,i=r.props.dispatch;switch(c.type){case 3:return g.default.createElement("div",null,g.default.createElement("div",{id:"".concat(v.KEY__LAUNCHER),className:"".concat(a()),onClick:r.handleToggle,onLoad:function(t){return s(t,c.type,n)}},l()),g.default.createElement(A.CTAButtons,{dispatch:i,dimensions:o,colors:p,classPosition:n,ctaButtonsData:t,agentConfig:u}));case 4:return g.default.createElement("div",null,g.default.createElement("div",{id:"".concat(v.KEY__LAUNCHER),className:"".concat(a()),onLoad:function(t){return s(t,c.type,n)}},l()),g.default.createElement(A.CTAButtons,{dispatch:i,dimensions:o,colors:p,classPosition:n,ctaButtonsData:t,agentConfig:u}));default:return g.default.createElement("div",null,g.default.createElement("div",{id:v.KEY__LAUNCHER,className:a(),onClick:r.handleToggle,onLoad:function(t){return s(t,c.type,n)}},l()),g.default.createElement(A.CTAButtons,{dispatch:i,dimensions:o,colors:p,classPosition:n,ctaButtonsData:t,agentConfig:u}))}}())}}]),o}(g.default.Component);(e.Launcher=m).propTypes={agentConfig:p.default.object,dispatch:p.default.func}},705:function(t,e,a){"use strict";var n=a(5);Object.defineProperty(e,"__esModule",{value:!0}),e.CTAButtons=void 0;var o=n(a(73)),c=n(a(74)),i=n(a(338)),s=n(a(143)),l=n(a(144)),r=n(a(98)),u=n(a(19)),p=n(a(27)),d=a(50),f=n(a(23)),m=n(a(24)),h=a(28),g=a(82);function v(a){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=(0,r.default)(a);return e=n?(t=(0,r.default)(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),(0,l.default)(this,e)}}a=function(t){(0,s.default)(a,t);var e=v(a);function a(t){var l;return(0,o.default)(this,a),l=e.call(this,t),(0,u.default)((0,i.default)(l),"handleCloseCTAButtons",function(t,e,a,n){t.preventDefault();n=[{action:"event_id",param:a.id},{action:"event_type",param:"close_cta_buttons"},{action:"cta_type",param:a.ctaType},{action:"activated_buttons",param:null!==n},{action:"event",param:"close_cta_buttons"}];(0,g.setEventAnalytics)(e.user.id,e.app.id,window.navigator.userAgent,n),l.props.dispatch((0,d.setConfig)({_showCTAButtons:!1})),l.setState({closedComponent:!0})}),(0,u.default)((0,i.default)(l),"calculateMargin",function(t){switch(t){case"right_bottom":case"center_bottom":case"left_bottom":return"bottom";default:return"top"}}),(0,u.default)((0,i.default)(l),"handleSendButtonCTA",function(t,e,a,n,o,c,i){t.preventDefault();var s=a.app,t=m.default.getUsers()[0],n=[{action:"event_id",param:c.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:c.ctaType},{action:"activated_button",param:null!==i},{action:"event",param:"click_send_button"},{action:"event_value",param:o},{action:"group",param:n}];(0,g.setEventAnalytics)(a.user.id,a.app.id,window.navigator.userAgent,n),l.props.dispatch((0,d.setConfig)({_showCTAButtons:!1})),l.setState({closedComponent:!0}),e((0,d.openWindow)()),e((0,d.sendMessage)(o,t,s.id))}),(0,u.default)((0,i.default)(l),"handleSendMessageCTA",function(t,e,a,n,o){t.preventDefault();n=[{action:"event_id",param:n.id},{action:"event_type",param:"firstInteraction-chat"},{action:"cta_type",param:n.ctaType},{action:"activated_button",param:null!==o},{action:"event",param:"click_send_message"},{action:"group",param:n.message}];(0,g.setEventAnalytics)(a.user.id,a.app.id,window.navigator.userAgent,n),l.setState({closedComponent:!0}),l.props.dispatch((0,d.setConfig)({_showCTAButtons:!1})),e((0,d.openWindow)())}),l.state={closedComponent:!1},l}return(0,c.default)(a,[{key:"render",value:function(){var a=this,t=this.props,n=t.dispatch,e=t.dimensions,o=t.colors,c=t.classPosition,i=t.ctaButtonsData,s=t.agentConfig,l=i.complements,r=s,u=this.state.closedComponent,d=r._showCTAButtons,t=this.calculateMargin(c),s="top"===t?e.height:0,e="bottom"===t?e.height:0;return u&&!d||null===i.message&&null===l?null:p.default.createElement("div",{className:"cta-buttons__notification-container \n            cta-buttons__notification__".concat(c),style:{marginTop:"".concat(s,"px"),marginBottom:"".concat(e,"px")}},null!==i.message&&(0,h.isSmallWindow)()||!(0,h.isSmallWindow)()?p.default.createElement("div",{className:"cta-buttons__notification-container-close"},p.default.createElement("i",{style:{background:o[0]},className:"material-icons",onClick:function(t){return a.handleCloseCTAButtons(t,r,i,l)}},"close")):null,null!==i.message?p.default.createElement("div",{onClick:function(t){return a.handleSendMessageCTA(t,n,r,i,l)},className:"cta-buttons__notification-container-message"},p.default.createElement("h4",null,i.message)):null,null===l||(0,h.isSmallWindow)()?null:p.default.createElement("div",{className:"cta-buttons__notification-container-buttons"},l.map(function(e){return p.default.createElement("div",{className:"cta-buttons__notification-container-buttons-element",key:e.name},p.default.createElement("button",{style:{background:o[0]},onClick:function(t){return a.handleSendButtonCTA(t,n,r,e.name,e.intention,i,l)}},e.name))})))}}]),a}(p.default.Component);(e.CTAButtons=a).propTypes={dispatch:f.default.func,colors:f.default.array,classPosition:f.default.string,ctaButtonsData:f.default.object,dimensions:f.default.object,agentConfig:f.default.object}}}]);